{% extends "layout.html" %}

{% block pageTitle %}
  How much allowance do you want to transfer?
{% endblock %}

{% block beforeContent %}
  <a class="govuk-back-link" href="/confirm-recipient-transfer">Back</a>
{% endblock %}


{% block content %}

<style>
input, select { display: block; }
</style>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-xl">
      <span class="govuk-caption-xl">{{ data['installationName']}}</span>
      How much allowance do you want to transfer?
    </h1>


<fieldset class="govuk-fieldset">
  <legend class="govuk-fieldset__legend govuk-fieldset__legend--xl">


<form class="form" action="/check-new-transfer" method="post">

  </legend>

  <div class="govuk-form-group">

    <label class="govuk-label" for="transfer-amount">
      Transfer amount
    </label>

    <span id="ID-hint" class="govuk-hint">
      You will have <span id="newnumber">{{ newNumber }}</span> units of allowance after this transfer
    </span>


    <input class="govuk-input govuk-input--width-6 myTextInput" id="amount-transfer" name="amount-transfer" type="number" value="{{ data['amount-transfer'] }}">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
      
      var number = $('#amount-transfer').val();  
      console.log(number);
      var newNumber = {{ data['allowanceValue'] }};
      if ( number ) {
        newNumber =  {{ data['allowanceValue'] }} - number;
      } else if ( !number ) {
        number = 0
      }
      $('#newnumber').text( newNumber );

      $('input.myTextInput').on('input',function(e){
        console.log('oi');
        number = $('#amount-transfer').val();  
        if ( number ) {
          newNumber =  {{ data['allowanceValue'] }} - number;
        } else if ( !number ) {
          number = 0
        }
        $('#newnumber').text( newNumber );
      });
      
    </script>
  </div>


<div>
</div>

  <button class="govuk-button">Continue</button>

</form>
</fieldset>

  </div>
  <div class="govuk-grid-column-one-third">
    <aside class="app-related-items" role="complementary">
      <h2 class="govuk-heading-s" id="subsection-title">
        {{ data['installationName'] }}
        <span class="govuk-caption-m">
          You have {{ data['allowanceValue'] }} units of allowance
        </span>
      </h2>
      <nav role="navigation" aria-labelledby="subsection-title">
        
        <ul class="govuk-list govuk-!-font-size-16">
          <li>
            <a href="start-submit">
              View transaction history
            </a>
          </li>
          <li>
            <a href="start-submit">
              Cancel allowance
            </a>
          </li>
        </ul>
      </nav>
    </aside>
  </div>
</div>

{% endblock %}
