{% extends "layout.html" %}

{% block pageTitle %}
  Question page
{% endblock %}

{% block beforeContent %}
  <a class="govuk-back-link" href="/installation-surrender">Back</a>
{% endblock %}

{% block content %}



  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">
            <span class="govuk-caption-xl">{{ data['whichinstallation']}}</span>
        Surrender your 2018 emission allowance
      </h1>
      <form class="form" action="/check-2-surrender" method="post">

      <p class="govuk-body" >You need to surrender <strong>2,160</strong> allowance for 2018 ETS compliance period. This figure is made up of your reported emissions for 2018 and any allowance you <a href="/transaction-history-transfer"> over surrendered or under surrendered from last year.</a></p>
      <p class="govuk-body"style="margin-bottom:30px">You need to surrender the full amount by 30 April 2019. If you don't have enough allowance you may need to <a href="#">acquire additional allowance</a>.</p>

      {% from "table/macro.njk" import govukTable %}
      <table class="govuk-table">
        <tbody class="govuk-table__body">
          <tr class="govuk-table__row">
            <th class="govuk-table__header" scope="row">Your 2018 reported emissions</th>
            <td class="govuk-table__cell govuk-table__cell--numeric" style="padding-right:5px;">2,480</td>
          </tr>
          <tr class="govuk-table__row">
            <th class="govuk-table__header" scope="row">Over surrendered amount from last year</th>
            <td class="govuk-table__cell govuk-table__cell--numeric" style="padding-right:5px;">320</td>
          </tr>
          <tr class="govuk-table__row">
            <th class="govuk-table__header" scope="row">Total allowance to be surrendered</th>
            <td class="govuk-table__cell govuk-table__cell--numeric" style="padding-right:7px;">2,160</td>
          </tr>
        </tbody>
      </table>

      <h2 class="govuk-heading-s">
        <span class="govuk-caption-s">{{ data['which-installation']}}</span>
      Do you want to surrender the full amount?
    </h2>

      <div class="govuk-form-group">
        <fieldset class="govuk-fieldset" aria-describedby="how-contacted-conditional-hint">
          <div class="govuk-radios govuk-radios--conditional" data-module="radios">
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="how-surrender-conditional-1" name="surrender-radio" type="radio" value="2,160" data-aria-controls="conditional-how-surrender-conditional-1" {{ checked ('surrender-radio', '2,160')}}>
              <label class="govuk-label govuk-radios__label" for="how-contacted-conditional-1">
                Yes, surrender 2,160
              </label>
            </div>
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="how-surrender-conditional-2" name="surrender-radio" type="radio" value="Other" data-aria-controls="conditional-how-surrender-conditional-2"  {{ checked ('surrender-radio', 'Other')}}>
              <label class="govuk-label govuk-radios__label" for="how-contacted-conditional-2">
                No, I want to choose how much to surrender
              </label>
            </div>
            <div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="conditional-how-surrender-conditional-2">
              <div class="govuk-form-group">
                  <input class="govuk-input govuk-input--width-5 number" id="amount-to-surrender" name="amount-to-surrender" type="text" style="text-align:right;font-family: "ntatabularnumbers", "nta", Arial, sans-serif;" value="{{ data['amount-to-surrender'] }}">
                  <span id="balance" class="govuk-hint">
                    You have 2,500 allowances
                    </span>
              </div>

            </div>
          </div>
        </fieldset>
      </div>

    <button class="govuk-button">Continue</button>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>

  <script>
    var el = document.querySelector('input.number');
    el.addEventListener('keyup', function (event) {
      if (event.which >= 37 && event.which <= 40) return;

      this.value = this.value.replace(/\D/g, '')
                             .replace(/\B(?=(\d{3})+(?!\d))/g, ',');
    });</script>
  </form>

    </div>
  </div>

{% endblock %}
