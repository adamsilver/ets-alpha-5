{% extends "layout.html" %}

{% set recipientType = data['recipient-type'] %}

{% block pageTitle %}
  Confirm transfer to an existing recipient
{% endblock %}

{% block beforeContent %}
  <a class="govuk-back-link" href="existing-recipient">Back</a>
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      <h1 class="govuk-heading-xl">
        <span class="govuk-caption-xl">{{ data['installationName']}}</span>
        {% if recipientType == 'existing' %}
          Confirm transfer to an existing recipient
        {% elif recipientType == 'new' %}
           Confirm transfer to a new recipient
        {% endif %}
      </h1>


      <!-- use additional modifier class to change column widths for multiple groups of questions and answers: -->
      <!--   * `app-check-your-answers--short` for short questions -->
      <!--   * `app-check-your-answers__questions-long` for long questions -->
      <!--   * none for single group of q&a -->
      <dl class="app-check-your-answers app-check-your-answers--short govuk-!-margin-bottom-5">
        <div class="app-check-your-answers__contents">
          <dt class="app-check-your-answers__question">
            Recipient
          </dt>
          <dd class="app-check-your-answers__answer">
          {% if recipientType == 'existing' %}
            {{ data['recipient-select']}}
          {% elif recipientType == 'new' %}
            Polimeri Europa UK
          {% endif %}
          </dd>
          <dd class="app-check-your-answers__change">
            <a href="{% if recipientType == 'existing' %}existing-recipient{% else %}new-recipient{% endif %}">
              Change<span class="govuk-visually-hidden"> recipient</span>
            </a>
          </dd>
        </div>
        {% if data['recipient-select'] != 'Choose a recipient' %}
        <div class="app-check-your-answers__contents">
          <dt class="app-check-your-answers__question">
            Recipient ID
          </dt>
          <dd class="app-check-your-answers__answer">
            {% if recipientType == 'existing' %}
              EU-100-77739-1-31
            {% elif recipientType == 'new' %}
              {{ data['recipient-name'] }}
            {% endif %}
          </dd>
          <dd class="app-check-your-answers__change">
            <a href="{% if recipientType == 'existing' %}existing-recipient{% else %}new-recipient{% endif %}">
              Change<span class="govuk-visually-hidden"> recipient</span>
            </a>
          </dd>
        </div>
        {% endif %}
        {% for emission, value, object in data['emissionAllowance'] %}
        <div class="app-check-your-answers__contents">
          <dt class="app-check-your-answers__question">
            Unit
          </dt>
          <dd class="app-check-your-answers__answer">
            {{ (emission).split('-').join(" ") }}
          </dd>
          <dd class="app-check-your-answers__change">
          </dd>
        </div>
        <div class="app-check-your-answers__contents">
          <dt class="app-check-your-answers__question">
            Amount
          </dt>
          <dd class="app-check-your-answers__answer">
            {{ value.started }}
          </dd>
          <dd class="app-check-your-answers__change">
            <a href="{% if recipientType == 'existing' %}existing-recipient{% else %}transfer-amount{% endif %}">
              Change<span class="govuk-visually-hidden"> Amount</span>
            </a>
          </dd>
        </div>

        <div class="app-check-your-answers__contents">
          <dt class="app-check-your-answers__question">
           New balance
          </dt>
          <dd class="app-check-your-answers__answer">
            {{ value.moved - value.started }}
          </dd>
          <dd class="app-check-your-answers__change">
          </dd>
        </div>
        {% endfor %}
      </dl>


      <p>
        Your transfer will be sent to another representative on your account to be approved.
      </p>
      {% if recipientType == 'new' %}
      <div class="govuk-checkboxes govuk-!-margin-bottom-6" data-module="checkboxes">
        <div class="govuk-checkboxes__item">
          <input class="govuk-checkboxes__input" id="citizenship-conditional-1" name="citizen" type="checkbox" value="email" data-aria-controls="conditional-citizenship-conditional-1">
          <label class="govuk-label govuk-checkboxes__label" for="citizenship-conditional-1">
            Save this recipient so you can transfer to them again later
          </label>
        </div>
      </div>
      {% endif %}
      <a class="govuk-button" href="confirmation" role="button">
        Submit transfer and send for approval
      </a>

    </div>
    {% include "includes/sidebar.html" %}
  </div>
{% endblock %}
